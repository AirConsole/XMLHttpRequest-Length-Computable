(function(){var f={CONTENT_ENCODING_MULTIPLE:1.5,DEFAULT_CONTENT_LENGTH:102400,DECOMPRESSED_CONTENT_LENGTH_HEADER:"x-decompressed-content-length"};if(window.Proxy){var n=XMLHttpRequest,m=function(a,c){var b=0;return function(e){if("progress"==e.type)if(0==e.lengthComputable){var d=e;e=new Proxy(e,{get:function(c,e){if("lengthComputable"==e)return!0;if("total"==e){try{if(d.lengthComputable)return d.total-1;if(a["decompressed-content-length"])return Math.max(a["decompressed-content-length"],d.loaded)-
1;var k=d.target.getResponseHeader(a.DECOMPRESSED_CONTENT_LENGTH_HEADER);if(void 0!=k)return Math.max(k,d.loaded)-1;if(!b){var h=d.target.getResponseHeader("content-length");if(h){var l=d.target.getResponseHeader("content-encoding");b=l&&"identity"!=l?h*a.CONTENT_ENCODING_MULTIPLE:h}else b=a.DEFAULT_CONTENT_LENGTH}}catch(q){return d.total-1}for(;d.loaded>=b;)b*=2;return b}return c[e]}})}else a.lengthComputable=!0;c(e)}},p={set:function(a,c,b){"onprogress"==c?(a[c]=m(a.xmlHTTPRequestLengthComputable,
b),a.xmlHTTPRequestLengthComputable.onprogress=b):a[c]=b;return!0},get:function(a,c){return"addEventListener"==c?function(){if("progress"==arguments[0]){var b=m(a.xmlHTTPRequestLengthComputable,arguments[1]);a.xmlHTTPRequestLengthComputable.progress_listeners.push([b,arguments[1]]);return a[c].call(a,arguments[0],b,arguments[2],arguments[3])}return a[c].apply(a,arguments)}:"removeEventListener"==c?function(){if("progress"==arguments[0])for(var b=a.xmlHTTPRequestLengthComputable.progress_listeners,
e=0;e<b.length;++e){if(b[e][1]==arguments[1])return b=b.splice(e)[0],a[c].call(a,arguments[0],b[0],arguments[2],arguments[3])}else return a[c].apply(a,arguments)}:"function"==typeof a[c]?function(){return a[c].apply(a,arguments)}:a[c]},deleteProperty:function(a,c){"onprogress"==c&&delete a.xmlHTTPRequestLengthComputable.onprogress;delete a[c]}};window.XMLHttpRequest=function(a){var c=new n(a),b=new Proxy(c,p),e=f;a&&a.xmlHTTPRequestLengthComputable&&(e=a.xmlHTTPRequestLengthComputable);var d={};for(var g in f)d[g]=
e[g]||f[g];e["decompressed-content-length"]&&(d["decompressed-content-length"]=e["decompressed-content-length"]);d.progress_listeners=[];c.addEventListener("load",function(a){if(!d.lengthComputable){var c=a;a=new Proxy(a,{get:function(a,b){return"lengthComputable"==b?!0:"total"==b||"loaded"==b?c.loaded||1:"type"==b?"progress":a[b]}});if(d.onprogress)d.onprogress(a);for(var b=0;b<d.progress_listeners.length;++b)if(d.progress_listeners[b][1])d.progress_listeners[b][1](a)}});d.xmlhttprequest=c;b.xmlHTTPRequestLengthComputable=
d;return b}}})();